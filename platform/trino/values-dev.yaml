# Development Environment - Trino Configuration
# Optimized for local development with minimal resources

trino:
  # Server configuration - minimal resources
  server:
    workers: 2
    
    coordinator:
      jvm:
        maxHeapSize: "2G"
      
      config:
        general:
          query.max-memory: "2GB"
          query.max-memory-per-node: "512MB"
          query.max-total-memory-per-node: "1GB"
      
      resources:
        requests:
          memory: 2Gi
          cpu: 500m
        limits:
          memory: 4Gi
          cpu: 1000m
    
    worker:
      jvm:
        maxHeapSize: "2G"
      
      config:
        general:
          query.max-memory-per-node: "1GB"
          query.max-total-memory-per-node: "1.5GB"
      
      resources:
        requests:
          memory: 2Gi
          cpu: 500m
        limits:
          memory: 4Gi
          cpu: 1000m
      
      autoscaling:
        enabled: false

  # Catalogs - development endpoints
  additionalCatalogs:
    iceberg: |
      connector.name=iceberg
      iceberg.catalog.type=rest
      iceberg.rest.uri=http://iceberg-catalog.lakehouse-platform.svc.cluster.local:8181
      iceberg.rest.warehouse=s3://lakehouse-dev-warehouse/
      
      # S3 configuration
      fs.native-s3.enabled=true
      s3.endpoint=http://minio.lakehouse-platform.svc.cluster.local:9000
      s3.path-style-access=true
      s3.aws-access-key=${ENV:S3_ACCESS_KEY}
      s3.aws-secret-key=${ENV:S3_SECRET_KEY}

  # Environment variables
  env:
    - name: S3_ACCESS_KEY
      valueFrom:
        secretKeyRef:
          name: trino-s3-credentials
          key: accessKeyId
    - name: S3_SECRET_KEY
      valueFrom:
        secretKeyRef:
          name: trino-s3-credentials
          key: secretAccessKey

  # Authentication - disabled for development
  auth:
    enabled: false

  # Security - TLS disabled for development
  security:
    tls:
      enabled: false

  # Metrics - disabled for development
  metrics:
    enabled: false

  # Ingress - disabled for development
  ingress:
    enabled: false

# Secrets - development credentials
secrets:
  s3:
    accessKeyId: admin
    secretAccessKey: changeme123
