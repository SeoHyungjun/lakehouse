# Lakehouse 플랫폼 아키텍처 및 데이터 흐름 가이드

**버전**: 1.0  
**최종 업데이트**: 2025-12-28

---

## 📊 전체 아키텍처 다이어그램

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          사용자 / 애플리케이션                            │
│                                                                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌─────────────┐│
│  │  데이터 분석가 │  │  데이터 엔지니어│  │  BI 도구      │  │  ML 모델     ││
│  │  (SQL 쿼리)   │  │ (파이프라인)   │  │  (Tableau)   │  │  (Python)   ││
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘  └──────┬──────┘│
└─────────┼──────────────────┼──────────────────┼──────────────────┼───────┘
          │                  │                  │                  │
          │                  │                  │                  │
┌─────────▼──────────────────▼──────────────────▼──────────────────▼───────┐
│                        Lakehouse Platform                                 │
├───────────────────────────────────────────────────────────────────────────┤
│                                                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐ │
│  │                      쿼리 & 처리 레이어                              │ │
│  ├─────────────────────────────────────────────────────────────────────┤ │
│  │                                                                     │ │
│  │  ┌──────────────────┐              ┌──────────────────┐           │ │
│  │  │      Trino       │              │     Airflow      │           │ │
│  │  │  (쿼리 엔진)      │◄────────────►│  (워크플로우)     │           │ │
│  │  │                  │              │                  │           │ │
│  │  │ • SQL 쿼리 실행   │              │ • DAG 스케줄링    │           │ │
│  │  │ • 분산 처리       │              │ • Job 실행        │           │ │
│  │  │ • 여러 카탈로그   │              │ • 모니터링        │           │ │
│  │  └────────┬─────────┘              └────────┬─────────┘           │ │
│  │           │                                 │                     │ │
│  └───────────┼─────────────────────────────────┼─────────────────────┘ │
│              │                                 │                       │
│  ┌───────────▼─────────────────────────────────▼─────────────────────┐ │
│  │                      메타데이터 레이어                              │ │
│  ├─────────────────────────────────────────────────────────────────────┤ │
│  │                                                                     │ │
│  │  ┌──────────────────────────────────────────────────────────────┐ │ │
│  │  │              Iceberg REST Catalog                            │ │ │
│  │  │                                                              │ │ │
│  │  │  • 테이블 스키마 관리                                         │ │ │
│  │  │  • 파티션 정보                                               │ │ │
│  │  │  • 스냅샷 관리 (Time Travel)                                 │ │ │
│  │  │  • ACID 트랜잭션                                             │ │ │
│  │  └────────────────────┬─────────────────────────────────────────┘ │ │
│  │                       │                                           │ │
│  └───────────────────────┼───────────────────────────────────────────┘ │
│                          │                                             │
│  ┌───────────────────────▼───────────────────────────────────────────┐ │
│  │                      스토리지 레이어                                │ │
│  ├─────────────────────────────────────────────────────────────────────┤ │
│  │                                                                     │ │
│  │  ┌──────────────────────────────────────────────────────────────┐ │ │
│  │  │                   MinIO (S3 호환)                            │ │ │
│  │  │                                                              │ │ │
│  │  │  Buckets:                                                    │ │ │
│  │  │  ┌─────────────────────────────────────────────────────────┐│ │ │
│  │  │  │ lakehouse-warehouse/                                    ││ │ │
│  │  │  │   ├── sales/                                            ││ │ │
│  │  │  │   │   ├── orders/                                       ││ │ │
│  │  │  │   │   │   ├── metadata/                                 ││ │ │
│  │  │  │   │   │   │   ├── v1.metadata.json                      ││ │ │
│  │  │  │   │   │   │   └── snap-123.avro                         ││ │ │
│  │  │  │   │   │   └── data/                                     ││ │ │
│  │  │  │   │   │       ├── order_date=2024-01-01/                ││ │ │
│  │  │  │   │   │       │   └── data-001.parquet                  ││ │ │
│  │  │  │   │   │       └── order_date=2024-01-02/                ││ │ │
│  │  │  │   │   │           └── data-002.parquet                  ││ │ │
│  │  │  └─────────────────────────────────────────────────────────┘│ │ │
│  │  └──────────────────────────────────────────────────────────────┘ │ │
│  │                                                                     │ │
│  └─────────────────────────────────────────────────────────────────────┘ │
│                                                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐ │
│  │                      모니터링 레이어                                  │ │
│  ├─────────────────────────────────────────────────────────────────────┤ │
│  │                                                                     │ │
│  │  ┌─────────────────┐         ┌─────────────────┐                  │ │
│  │  │   Prometheus    │────────►│    Grafana      │                  │ │
│  │  │  (메트릭 수집)   │         │   (시각화)       │                  │ │
│  │  └─────────────────┘         └─────────────────┘                  │ │
│  │                                                                     │ │
│  └─────────────────────────────────────────────────────────────────────┘ │
│                                                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐ │
│  │                      GitOps 레이어                                    │ │
│  ├─────────────────────────────────────────────────────────────────────┤ │
│  │                                                                     │ │
│  │  ┌─────────────────┐         ┌─────────────────┐                  │ │
│  │  │      Git        │────────►│     ArgoCD      │                  │ │
│  │  │  (소스 저장소)   │         │  (자동 배포)     │                  │ │
│  │  └─────────────────┘         └─────────────────┘                  │ │
│  │                                                                     │ │
│  └─────────────────────────────────────────────────────────────────────┘ │
│                                                                           │
└───────────────────────────────────────────────────────────────────────────┘
                                    │
                                    │
                        ┌───────────▼───────────┐
                        │   Kubernetes Cluster  │
                        │   (인프라 기반)        │
                        └───────────────────────┘
```

---

## 🔄 데이터 흐름 시나리오

### 시나리오 1: 데이터 저장 (INSERT)

```
1. 사용자가 SQL 실행
   ↓
   INSERT INTO sales.orders VALUES (1, 'Product A', 100.00)
   ↓

2. Trino가 요청 받음
   ┌─────────────────────────────────────────┐
   │ Trino Coordinator                       │
   │ • SQL 파싱                              │
   │ • 실행 계획 생성                         │
   │ • 워커에 작업 분배                       │
   └─────────────┬───────────────────────────┘
                 │
                 ▼
3. Iceberg Catalog에 메타데이터 등록
   ┌─────────────────────────────────────────┐
   │ Iceberg Catalog                         │
   │ • 새 스냅샷 생성                         │
   │ • 메타데이터 파일 업데이트               │
   │ • 트랜잭션 커밋                          │
   └─────────────┬───────────────────────────┘
                 │
                 ▼
4. MinIO에 실제 데이터 저장
   ┌─────────────────────────────────────────┐
   │ MinIO                                   │
   │ lakehouse-warehouse/                    │
   │   └── sales/orders/                     │
   │       ├── metadata/                     │
   │       │   └── snap-456.avro  ← 새 스냅샷│
   │       └── data/                         │
   │           └── data-003.parquet ← 새 파일│
   └─────────────────────────────────────────┘
                 │
                 ▼
5. 사용자에게 성공 응답
   "1 row inserted"
```

### 시나리오 2: 데이터 조회 (SELECT)

```
1. 사용자가 SQL 실행
   ↓
   SELECT * FROM sales.orders WHERE order_date = '2024-01-01'
   ↓

2. Trino가 요청 받음
   ┌─────────────────────────────────────────┐
   │ Trino Coordinator                       │
   │ • SQL 파싱                              │
   │ • WHERE 조건 분석                       │
   │ • 파티션 프루닝 계획                     │
   └─────────────┬───────────────────────────┘
                 │
                 ▼
3. Iceberg Catalog에서 메타데이터 조회
   ┌─────────────────────────────────────────┐
   │ Iceberg Catalog                         │
   │ • 최신 스냅샷 확인                       │
   │ • 파티션 정보 조회                       │
   │ • 필요한 파일 목록 반환                  │
   │   → order_date=2024-01-01/data-001.parquet│
   └─────────────┬───────────────────────────┘
                 │
                 ▼
4. MinIO에서 데이터 파일 읽기
   ┌─────────────────────────────────────────┐
   │ MinIO                                   │
   │ lakehouse-warehouse/sales/orders/       │
   │   └── data/                             │
   │       └── order_date=2024-01-01/        │
   │           └── data-001.parquet ← 읽기   │
   └─────────────┬───────────────────────────┘
                 │
                 ▼
5. Trino Worker가 데이터 처리
   ┌─────────────────────────────────────────┐
   │ Trino Workers (병렬 처리)                │
   │ • Parquet 파일 파싱                      │
   │ • 필터 적용                              │
   │ • 집계 연산                              │
   └─────────────┬───────────────────────────┘
                 │
                 ▼
6. 사용자에게 결과 반환
   order_id | product    | amount
   ---------|------------|--------
   1        | Product A  | 100.00
   2        | Product B  | 200.00
```

### 시나리오 3: 워크플로우 실행 (Airflow)

```
1. 스케줄 트리거 (매일 2AM)
   ┌─────────────────────────────────────────┐
   │ Airflow Scheduler                       │
   │ • DAG 스케줄 확인                        │
   │ • 실행 시간 도달                         │
   │ • Task 큐에 추가                         │
   └─────────────┬───────────────────────────┘
                 │
                 ▼
2. Kubernetes Job 생성
   ┌─────────────────────────────────────────┐
   │ Airflow KubernetesExecutor              │
   │ • Pod 스펙 생성                          │
   │ • 환경 변수 주입                         │
   │ • Job 제출                               │
   └─────────────┬───────────────────────────┘
                 │
                 ▼
3. Job Pod 실행
   ┌─────────────────────────────────────────┐
   │ Kubernetes Pod                          │
   │ Container: lakehouse/ingest-job:1.0     │
   │                                         │
   │ ┌─────────────────────────────────────┐ │
   │ │ ingest.py                           │ │
   │ │ • Trino 연결                        │ │
   │ │ • 데이터 생성                        │ │
   │ │ • INSERT 실행                       │ │
   │ └─────────────────────────────────────┘ │
   └─────────────┬───────────────────────────┘
                 │
                 ▼
4. Trino를 통해 데이터 저장
   (시나리오 1과 동일한 흐름)
                 │
                 ▼
5. Job 완료 및 로그 저장
   ┌─────────────────────────────────────────┐
   │ Airflow                                 │
   │ • Task 상태 업데이트: SUCCESS           │
   │ • 로그 저장 (S3 또는 로컬)              │
   │ • 다음 Task 트리거                      │
   └─────────────────────────────────────────┘
```

---

## 🗂️ 파일 시스템 구조

### MinIO 버킷 구조

```
lakehouse-warehouse/
│
├── sales/                          # 네임스페이스
│   ├── orders/                     # 테이블
│   │   ├── metadata/               # Iceberg 메타데이터
│   │   │   ├── v1.metadata.json   # 테이블 메타데이터
│   │   │   ├── v2.metadata.json
│   │   │   ├── snap-001.avro      # 스냅샷 파일
│   │   │   ├── snap-002.avro
│   │   │   └── manifest-list-001.avro
│   │   │
│   │   └── data/                   # 실제 데이터
│   │       ├── order_date=2024-01-01/
│   │       │   ├── data-001.parquet
│   │       │   └── data-002.parquet
│   │       ├── order_date=2024-01-02/
│   │       │   └── data-003.parquet
│   │       └── order_date=2024-01-03/
│   │           └── data-004.parquet
│   │
│   └── customers/                  # 다른 테이블
│       ├── metadata/
│       └── data/
│
├── marketing/                      # 다른 네임스페이스
│   └── campaigns/
│       ├── metadata/
│       └── data/
│
└── analytics/
    └── reports/
        ├── metadata/
        └── data/
```

### 프로젝트 디렉토리 구조 (상세)

```
lakehouse/
│
├── contracts/                      # 📋 인터페이스 정의
│   ├── kubernetes-cluster.md       # 클러스터 요구사항
│   ├── object-storage.md           # S3 API 스펙
│   ├── iceberg-catalog.md          # Iceberg REST API
│   ├── query-engine.md             # SQL 엔진 요구사항
│   ├── service-module.md           # 서비스 표준
│   └── workflow-orchestration.md   # 워크플로우 표준
│
├── docs/                           # 📚 문서
│   ├── TODO.md                     # 작업 목록 (완료)
│   ├── definition_of_done.md       # 완료 기준
│   ├── dod-report.md               # DoD 검증 보고서
│   ├── runbook.md                  # 운영 가이드
│   ├── GETTING_STARTED_KR.md       # 한글 시작 가이드
│   └── ARCHITECTURE_KR.md          # 아키텍처 가이드
│
├── env/                            # ⚙️ 환경별 설정
│   ├── dev/
│   │   ├── terraform.tfvars        # 개발 인프라 설정
│   │   └── helm-values.yaml        # 개발 Helm 값
│   ├── staging/
│   │   ├── terraform.tfvars
│   │   └── helm-values.yaml
│   └── prod/
│       ├── terraform.tfvars
│       └── helm-values.yaml
│
├── infra/                          # 🏗️ 인프라 코드
│   ├── main.tf                     # Terraform 메인
│   ├── variables.tf                # 변수 정의
│   ├── outputs.tf                  # 출력 값
│   └── modules/
│       └── cluster/                # 클러스터 모듈
│           ├── main.tf
│           ├── variables.tf
│           └── outputs.tf
│
├── platform/                       # 🎯 플랫폼 컴포넌트
│   ├── minio/                      # MinIO Helm 차트
│   │   ├── Chart.yaml
│   │   ├── values.yaml
│   │   ├── values-dev.yaml
│   │   ├── values-staging.yaml
│   │   ├── values-prod.yaml
│   │   ├── templates/
│   │   │   ├── deployment.yaml
│   │   │   ├── service.yaml
│   │   │   ├── pvc.yaml
│   │   │   └── servicemonitor.yaml
│   │   ├── README.md
│   │   └── validate.sh
│   │
│   ├── iceberg-catalog/            # Iceberg Catalog
│   ├── trino/                      # Trino
│   ├── airflow/                    # Airflow
│   ├── observability/              # Prometheus + Grafana
│   └── argocd/                     # ArgoCD
│
├── scripts/                        # 🔧 자동화 스크립트
│   ├── bootstrap.sh                # 전체 배포
│   ├── cleanup.sh                  # 전체 제거
│   ├── validate.sh                 # 검증
│   └── README.md
│
├── services/                       # 🚀 샘플 서비스
│   └── sample-service/
│       ├── app.py                  # Flask 애플리케이션
│       ├── requirements.txt
│       ├── Dockerfile
│       ├── sample-service.service  # systemd 파일
│       ├── install-bare-metal.sh   # 베어메탈 설치
│       ├── test.sh                 # 테스트 스크립트
│       ├── chart/                  # Helm 차트
│       │   ├── Chart.yaml
│       │   ├── values.yaml
│       │   └── templates/
│       └── README.md
│
├── tests/                          # ✅ 테스트
│   ├── e2e/                        # E2E 테스트
│   │   ├── conftest.py             # pytest 설정
│   │   ├── test_platform_components.py
│   │   ├── test_data_flow.py
│   │   ├── test_service_integration.py
│   │   ├── requirements.txt
│   │   ├── run_tests.sh
│   │   └── README.md
│   │
│   └── compatibility/              # 호환성 테스트
│       └── bare-metal-validation-report.md
│
├── workflows/                      # 🔄 샘플 워크플로우
│   └── sample-job/
│       ├── job-spec.yaml           # 오케스트레이터 독립적 스펙
│       ├── workflow-spec.yaml      # 워크플로우 정의
│       ├── job/                    # Job 구현
│       │   ├── ingest.py           # Python 스크립트
│       │   ├── requirements.txt
│       │   └── Dockerfile
│       ├── airflow/                # Airflow 어댑터
│       │   └── dag.py
│       └── README.md
│
└── README.md                       # 프로젝트 README
```

---

## 🔧 설정 파일 계층 구조

### Helm Values 우선순위

```
1. 명령줄 --set 플래그 (최우선)
   ↓
2. 환경별 values 파일 (env/dev/helm-values.yaml)
   ↓
3. 컴포넌트별 환경 파일 (platform/trino/values-dev.yaml)
   ↓
4. 기본 values 파일 (platform/trino/values.yaml)
```

**예시**:
```bash
# 우선순위 적용 예시
helm install trino ./platform/trino \
  --values platform/trino/values.yaml \           # 4. 기본값
  --values platform/trino/values-dev.yaml \       # 3. 환경별 기본값
  --values env/dev/helm-values.yaml \             # 2. 전체 환경 설정
  --set server.workers=10                         # 1. 명령줄 (최우선)
```

### 환경 변수 흐름

```
1. Git 저장소
   env/dev/helm-values.yaml
   ↓
2. Helm 템플릿 렌더링
   templates/deployment.yaml
   ↓
3. Kubernetes ConfigMap/Secret
   ↓
4. Pod 환경 변수
   ↓
5. 애플리케이션 코드
   os.getenv('TRINO_ENDPOINT')
```

---

## 📊 모니터링 대시보드 구조

### Grafana 대시보드 계층

```
Grafana
│
├── Lakehouse Overview              # 전체 시스템 개요
│   ├── 전체 Pod 상태
│   ├── 리소스 사용량 (CPU/Memory)
│   ├── 네트워크 트래픽
│   └── 스토리지 사용량
│
├── MinIO Metrics                   # MinIO 상세
│   ├── 버킷별 사용량
│   ├── API 요청 수
│   ├── 에러율
│   └── 응답 시간
│
├── Trino Metrics                   # Trino 상세
│   ├── 실행 중인 쿼리 수
│   ├── 쿼리 성공/실패율
│   ├── 평균 쿼리 시간
│   ├── 워커 리소스 사용량
│   └── 카탈로그별 쿼리 분포
│
├── Airflow Metrics                 # Airflow 상세
│   ├── DAG 실행 상태
│   ├── Task 성공/실패율
│   ├── 스케줄러 지연
│   └── 워커 상태
│
└── Iceberg Catalog Metrics         # Iceberg 상세
    ├── API 요청 수
    ├── 테이블 수
    ├── 스냅샷 생성 속도
    └── 메타데이터 크기
```

### Prometheus 메트릭 수집 흐름

```
1. 각 컴포넌트가 /metrics 엔드포인트 노출
   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐
   │   MinIO     │  │   Trino     │  │  Airflow    │
   │ :9000/metrics│  │ :8080/metrics│  │ :8080/metrics│
   └──────┬──────┘  └──────┬──────┘  └──────┬──────┘
          │                │                │
          └────────────────┼────────────────┘
                           │
2. ServiceMonitor가 스크래핑 대상 정의
                           │
                           ▼
   ┌─────────────────────────────────────────┐
   │ ServiceMonitor (CRD)                    │
   │ • 대상 서비스 선택                       │
   │ • 스크래핑 간격 (30s)                    │
   │ • 메트릭 경로 (/metrics)                │
   └─────────────┬───────────────────────────┘
                 │
3. Prometheus가 주기적으로 수집
                 │
                 ▼
   ┌─────────────────────────────────────────┐
   │ Prometheus                              │
   │ • 메트릭 수집 (30초마다)                 │
   │ • 시계열 DB에 저장                       │
   │ • 보관 기간 관리 (dev: 3d, prod: 30d)   │
   └─────────────┬───────────────────────────┘
                 │
4. Grafana가 쿼리하여 시각화
                 │
                 ▼
   ┌─────────────────────────────────────────┐
   │ Grafana                                 │
   │ • PromQL 쿼리 실행                       │
   │ • 대시보드 렌더링                        │
   │ • 알림 평가                              │
   └─────────────────────────────────────────┘
```

---

## 🔐 보안 아키텍처

### Secret 관리 흐름

```
1. Secret 생성 (외부 시스템)
   ┌─────────────────────────────────────────┐
   │ Vault / AWS Secrets Manager / etc.     │
   │ • MinIO credentials                     │
   │ • OAuth2 tokens                         │
   │ • TLS certificates                      │
   └─────────────┬───────────────────────────┘
                 │
2. External Secrets Operator (선택사항)
                 │
                 ▼
   ┌─────────────────────────────────────────┐
   │ ExternalSecret (CRD)                    │
   │ • 외부 Secret 참조                       │
   │ • 동기화 간격                            │
   └─────────────┬───────────────────────────┘
                 │
3. Kubernetes Secret 생성
                 │
                 ▼
   ┌─────────────────────────────────────────┐
   │ Kubernetes Secret                       │
   │ • Base64 인코딩                          │
   │ • RBAC로 접근 제어                       │
   └─────────────┬───────────────────────────┘
                 │
4. Pod에 마운트
                 │
                 ▼
   ┌─────────────────────────────────────────┐
   │ Pod                                     │
   │ • 환경 변수로 주입                       │
   │ • 또는 파일로 마운트                     │
   │   /var/secrets/minio-credentials        │
   └─────────────────────────────────────────┘
```

### 네트워크 보안 레이어

```
┌─────────────────────────────────────────────────────────┐
│ 외부 사용자                                              │
└─────────────┬───────────────────────────────────────────┘
              │
              │ HTTPS (TLS)
              │
┌─────────────▼───────────────────────────────────────────┐
│ Ingress Controller (nginx)                              │
│ • TLS 종료                                               │
│ • 인증서 관리 (cert-manager)                             │
│ • 라우팅 규칙                                            │
└─────────────┬───────────────────────────────────────────┘
              │
              │ HTTP (내부 네트워크)
              │
┌─────────────▼───────────────────────────────────────────┐
│ Kubernetes Service (ClusterIP)                          │
│ • 내부 로드 밸런싱                                        │
│ • 서비스 디스커버리                                       │
└─────────────┬───────────────────────────────────────────┘
              │
              │
┌─────────────▼───────────────────────────────────────────┐
│ Pods                                                     │
│ • NetworkPolicy로 접근 제어                              │
│ • Pod Security Policy                                   │
└─────────────────────────────────────────────────────────┘
```

---

## 🚀 배포 프로세스 흐름

### GitOps 배포 흐름 (ArgoCD)

```
1. 개발자가 코드 변경
   ┌─────────────────────────────────────────┐
   │ Developer                               │
   │ • Helm values 수정                       │
   │ • Git commit & push                     │
   └─────────────┬───────────────────────────┘
                 │
2. Git 저장소 업데이트
                 │
                 ▼
   ┌─────────────────────────────────────────┐
   │ Git Repository (GitHub/GitLab)          │
   │ • main 브랜치 업데이트                   │
   │ • Webhook 트리거 (선택사항)              │
   └─────────────┬───────────────────────────┘
                 │
3. ArgoCD가 변경 감지
                 │
                 ▼
   ┌─────────────────────────────────────────┐
   │ ArgoCD                                  │
   │ • Git 폴링 (3분마다)                     │
   │ • 또는 Webhook 수신                      │
   │ • 차이점 감지                            │
   └─────────────┬───────────────────────────┘
                 │
4. 자동 동기화 (설정된 경우)
                 │
                 ▼
   ┌─────────────────────────────────────────┐
   │ ArgoCD Sync                             │
   │ • Helm 템플릿 렌더링                     │
   │ • Kubernetes 매니페스트 생성             │
   │ • kubectl apply 실행                     │
   └─────────────┬───────────────────────────┘
                 │
5. Kubernetes 리소스 업데이트
                 │
                 ▼
   ┌─────────────────────────────────────────┐
   │ Kubernetes                              │
   │ • Deployment 롤링 업데이트               │
   │ • 새 Pod 생성                            │
   │ • 이전 Pod 종료                          │
   └─────────────┬───────────────────────────┘
                 │
6. 헬스 체크 및 완료
                 │
                 ▼
   ┌─────────────────────────────────────────┐
   │ ArgoCD Health Check                     │
   │ • Pod 상태 확인                          │
   │ • Readiness probe 확인                   │
   │ • Sync 상태 업데이트: Healthy           │
   └─────────────────────────────────────────┘
```

---

## 📈 확장성 시나리오

### 수평 확장 (Scale Out)

```
현재 상태:
┌─────────────────────────────────────────┐
│ Trino                                   │
│ ┌──────────┐  ┌──────────┐             │
│ │Coordinator│  │ Worker 1 │             │
│ └──────────┘  └──────────┘             │
└─────────────────────────────────────────┘

부하 증가 (CPU > 70%)
         ↓

HPA (Horizontal Pod Autoscaler) 트리거
         ↓

확장 후:
┌─────────────────────────────────────────┐
│ Trino                                   │
│ ┌──────────┐  ┌──────────┐  ┌──────────┐│
│ │Coordinator│  │ Worker 1 │  │ Worker 2 ││
│ └──────────┘  └──────────┘  └──────────┘│
│               ┌──────────┐  ┌──────────┐│
│               │ Worker 3 │  │ Worker 4 ││
│               └──────────┘  └──────────┘│
└─────────────────────────────────────────┘
```

### 수직 확장 (Scale Up)

```
현재 리소스:
┌─────────────────────────────────────────┐
│ Trino Worker                            │
│ Memory: 4Gi                             │
│ CPU: 2000m                              │
└─────────────────────────────────────────┘

메모리 부족 발생
         ↓

values.yaml 수정
         ↓

확장 후:
┌─────────────────────────────────────────┐
│ Trino Worker                            │
│ Memory: 16Gi  ← 증가                    │
│ CPU: 8000m    ← 증가                    │
└─────────────────────────────────────────┘
```

---

**이 문서는 Lakehouse 플랫폼의 전체 아키텍처와 데이터 흐름을 시각적으로 설명합니다.**

**더 자세한 내용은 `GETTING_STARTED_KR.md`를 참조하세요!**
