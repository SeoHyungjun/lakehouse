# Lakehouse Platform Secrets
# Copy this file to .env and fill in the real values.
# .env is gitignored and should NEVER be committed.

# ==========================================
# MinIO (S3 Compatible Storage)
# ==========================================
# Password must be at least 8 characters
MINIO_ROOT_USER=change_me_minio_user
MINIO_ROOT_PASSWORD=change_me_minio_password

# ==========================================
# Database (Postgres)
# ==========================================
# Used by Airflow and Iceberg Catalog
POSTGRES_USER=change_me_postgres_user
POSTGRES_PASSWORD=change_me_postgres_password

# ==========================================
# Airflow
# ==========================================
AIRFLOW_ADMIN_USER=admin
AIRFLOW_ADMIN_PASSWORD=change_me_airflow_password
AIRFLOW_WEBSERVER_SECRET_KEY=change_me_airflow_secret
# Generate Fernet key: python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
AIRFLOW_FERNET_KEY=change_me_fernet_key

# ==========================================
# Observability (Grafana)
# ==========================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change_me_grafana_password

# ==========================================
# Airflow External Connections
# ==========================================
# PostgreSQL Connection for DAGs (not Airflow metadata DB)
# Format: postgresql://user:password@host:port/database
# Default: Kind internal PostgreSQL (same as Airflow metadata DB)
AIRFLOW_CONN_POSTGRES_DEFAULT=postgresql://lakehouse:lakehouse@airflow-postgresql.lakehouse-platform:5432/airflow

# MinIO endpoint URL (for boto3 client in DAGs)
MINIO_ENDPOINT_URL=http://minio.lakehouse-platform:9000

# MinIO Connection for Airflow DAGs (S3 Compatible)
# Format: s3://access_key:secret_key@bucket_name?__extra__=url_encoded_json
# __extra__ contains JSON with endpoint_url: {"endpoint_url":"http://minio:9000"}
# Note: bucket_name should follow <project>-<environment>-<purpose> convention
# Dev: lakehouse-dev-raw, lakehouse-dev-warehouse, lakehouse-dev-temp
# Staging: lakehouse-staging-raw, lakehouse-staging-warehouse, lakehouse-staging-temp
# Prod: lakehouse-prod-raw, lakehouse-prod-warehouse, lakehouse-prod-temp
AIRFLOW_CONN_AWS_DEFAULT=s3://lakehouse:lakehouse@lakehouse-dev-warehouse?__extra__=%7B%22endpoint_url%22%3A%22http%3A%2F%2Fminio%3A9000%22%7D

# ==========================================
# Airflow GitSync
# ==========================================
# GitHub credentials for GitSync to pull DAGs from lakehouse-dags repository
GITHUB_USERNAME=your_github_username
GITHUB_TOKEN=your_github_pat_token

# ==========================================
# Airflow DAG Environment Variables
# ==========================================
# MinIO credentials for boto3 client in DAGs
MINIO_ACCESS_KEY=change_me_minio_access_key
MINIO_SECRET_KEY=change_me_minio_secret_key
# Bucket naming: <project>-<environment>-<purpose>
# Dev: lakehouse-dev-raw, lakehouse-dev-warehouse, lakehouse-dev-temp
# Staging: lakehouse-staging-raw, lakehouse-staging-warehouse, lakehouse-staging-temp
# Prod: lakehouse-prod-raw, lakehouse-prod-warehouse, lakehouse-prod-temp
MINIO_BUCKET=change_me_minio_bucket

# ==========================================
# Trino (Query Engine)
# ==========================================
TRINO_ENDPOINT_URL=http://trino-coordinator.lakehouse-platform:8080
TRINO_CATALOG=iceberg
TRINO_SCHEMA=default

# ==========================================
# PostgreSQL (Data Source for DAGs)
# ==========================================
POSTGRES_HOST=airflow-postgresql.lakehouse-platform.svc.cluster.local
POSTGRES_PORT=5432
POSTGRES_DATABASE=airflow
POSTGRES_USERNAME=change_me_postgres_dag_user
POSTGRES_PASSWORD=change_me_postgres_dag_password

# ==========================================
# External System Configuration (for DAGs)
# ==========================================
# These variables are used by Airflow DAGs to connect to external systems
# They are NOT part of the Lakehouse platform infrastructure

# KDP (Samsung Digital Platform) API Configuration
# Used by DAGs to interact with KDP file service
KDP_REQUEST_URL=https://ipaas-sca.sec.samsung.net/sec/kr/DigitalPlatform_KOREA_KDP_RUBICON_IF/1.0/fileservice
KDP_REGION=KR
KDP_OPT_TYPE=PROD

# KDP OAuth2 Token Configuration
# Used by DAGs to obtain OAuth2 tokens for KDP API
KDP_TOKEN_URL=https://ipaas-sca.sec.samsung.net/sec/kr/long/oauth2/token

# KDP OAuth2 Credentials (User 1)
KDP_OAUTH_USERNAME=change_me_oauth_username
KDP_OAUTH_CLIENT_ID_PROD=change_me_oauth_client_id_prod
KDP_OAUTH_CLIENT_SECRET_PROD=change_me_oauth_client_secret_prod
KDP_OAUTH_PASSWORD_PROD=change_me_oauth_password_prod
KDP_OAUTH_CLIENT_ID_DEV=change_me_oauth_client_id_dev
KDP_OAUTH_CLIENT_SECRET_DEV=change_me_oauth_client_secret_dev
KDP_OAUTH_PASSWORD_DEV=change_me_oauth_password_dev

# KDP OAuth2 Credentials (User 2) - Optional
KDP_OAUTH_USERNAME_USER2=
KDP_OAUTH_CLIENT_ID_USER2_PROD=
KDP_OAUTH_CLIENT_SECRET_USER2_PROD=
KDP_OAUTH_PASSWORD_USER2_PROD=
KDP_OAUTH_CLIENT_ID_USER2_DEV=
KDP_OAUTH_CLIENT_SECRET_USER2_DEV=
KDP_OAUTH_PASSWORD_USER2_DEV=
