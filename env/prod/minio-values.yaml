# MinIO Production Environment Configuration
# Platform defaults: platform/minio/values.yaml
# Override ONLY environment-specific values

# Production requires distributed mode for high availability (SLA: 99.9%)
mode: distributed
replicas: 4

# Production-specific bucket naming (includes archive bucket)
buckets:
  - name: lakehouse-prod-raw
    policy: none
    purge: false
  - name: lakehouse-prod-warehouse
    policy: none
    purge: false
  - name: lakehouse-prod-temp
    policy: none
    purge: false
  - name: lakehouse-prod-archive
    policy: none
    purge: false

# Large storage with high-performance storage class (I/O requirement: 10K IOPS)
persistence:
  size: 100Gi
  storageClass: "fast-ssd"

# Production-grade resources for high throughput
resources:
  requests:
    memory: 2Gi
    cpu: 1000m
  limits:
    memory: 4Gi
    cpu: 2000m

# TLS enabled for production security
tls:
  enabled: true
  certSecret: minio-tls-cert

# Ingress with automatic TLS certificate management
ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/proxy-body-size: "0"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "600"
  hosts:
    - minio.lakehouse.example.com
  tls:
    - secretName: minio-tls-cert
      hosts:
        - minio.lakehouse.example.com

# Production metrics with custom scrape intervals
metrics:
  serviceMonitor:
    enabled: true
    interval: 30s
    scrapeTimeout: 10s

# Console ingress for web UI access
consoleIngress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - minio-console.lakehouse.example.com
  tls:
    - secretName: minio-console-tls-cert
      hosts:
        - minio-console.lakehouse.example.com

# Pod anti-affinity for HA (spread replicas across different nodes)
affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: app
              operator: In
              values:
                - minio
        topologyKey: kubernetes.io/hostname
